import{u,F as m,r as o,b as f,j as e,C as b,I as C,B as N,dl as k,dm as w,o as I,dn as S,dj as A,dp as E,dq as h,L as j,k as y,dr as M,x as P,y as g}from"./index-16ff5701.js";import{V as v}from"./ViewBtn-eedc84ae.js";import{U as F,C as T,T as L}from"./TableComponent-f70e0475.js";import{T as Y}from"./TableNoPagination-c83d1dd6.js";import{L as $,P as D}from"./AdminLayout-ac80ae52.js";import{M as B}from"./index-2e4f1652.js";import{E as U}from"./EditOutlined-f754bc7b.js";import{C as q}from"./CreateDrawer-33537b52.js";import{C as O}from"./CommonDelete-6a643bdc.js";import"./Button-81cb4f36.js";import"./index-8b1cef28.js";import"./useForceUpdate-5b1eefe7.js";import"./InfoCircleFilled-829db91a.js";import"./fade-f955b557.js";import"./DeleteOutlined-e1f8fe69.js";const R=({handleCancel:s})=>{const i=u(),[a]=m.useForm(),[l,n]=o.useState(!1),{department:r}=f(t=>t.department),c=async t=>{await i(k({id:r.id,values:t})),await i(w(r.id)),s(),n(!1)},d=()=>{n(!1)};return o.useEffect(()=>{a.setFieldValue("name",r.name)},[r]),e.jsx(o.Fragment,{children:e.jsx(b,{bordered:!1,className:"h-full",children:e.jsxs(m,{form:a,className:"",onFinish:c,onFinishFailed:d,children:[e.jsx(m.Item,{style:{marginBottom:"10px"},label:"Name",name:"name",rules:[{required:!0,message:"Please enter department name!"}],children:e.jsx(C,{})}),e.jsx(m.Item,{style:{marginBottom:"10px"},className:"flex justify-center mt-6",children:e.jsx(N,{type:"primary",htmlType:"submit",shape:"round",loading:l,onClick:()=>n(!0),children:"Update Department"})})]})})})},V=R;function G(){const s=u(),{id:i}=I(),{department:a,loading:l}=f(x=>x.department),[n,r]=o.useState(!1),c=()=>{r(!0)},d=()=>{r(!1)},t=[{id:1,title:"ID",dataIndex:"id",key:"id"},{id:2,title:"Name",dataIndex:"username",key:"username"},{id:6,title:"action",key:"action",render:({id:x})=>e.jsx(v,{path:`/admin/hr/staffs/${x}`})}];o.useEffect(()=>(s(w(i)),()=>{s(S())}),[s,i]);const p=e.jsx(e.Fragment,{children:e.jsx("h5",{className:"text-lg",children:"Employee List"})});return e.jsxs("div",{children:[e.jsx("div",{className:"mr-top",children:a?e.jsxs(b,{className:"border-0 md:border md:p-6 bg-transparent md:bg-[#fafafa]",bodyStyle:{padding:0},children:[e.jsxs("div",{className:"md:flex flex justify-between md:mb-8 items-center gap-2",children:[e.jsx("h5",{className:"flex items-center",children:e.jsx("span",{className:"mr-left",children:a.name})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(F,{permission:"update-department",children:e.jsx(U,{onClick:()=>{s(k()),c()},className:"bg-gray-600 p-3 text-white rounded-md"})})})]}),e.jsx(Y,{loading:l,list:a==null?void 0:a.user,columns:t,csvFileName:a.name,rightElement:p})]},a.id):e.jsx($,{})}),e.jsx(B,{title:"Update Department",open:n,onCancel:d,footer:!1,children:e.jsx(V,{handleCancel:d})})]})}function H(){const s=u(),[i]=m.useForm(),[a,l]=o.useState(!1),n=async c=>{l(!0);try{(await s(E(c))).payload.message==="success"&&(i.resetFields(),s(h({}))),l(!1)}catch{l(!1)}},r=()=>{l(!1)};return e.jsxs("div",{className:" h-full",children:[e.jsx(A,{level:4,className:"m-3 text-center",children:"Add Department"}),e.jsxs(m,{form:i,name:"basic",layout:"vertical",className:"sm:mx-10",onFinish:n,onFinishFailed:r,children:[e.jsx(m.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please enter department Name!"}],children:e.jsx(C,{})}),e.jsx(m.Item,{style:{marginBottom:"10px"},className:"flex justify-center mt-6",children:e.jsx(N,{type:"primary",htmlType:"submit",shape:"round",loading:a,children:"Create Department"})})]})]})}const z=()=>{const s=u(),{list:i,total:a,loading:l}=f(t=>t.department),[n,r]=o.useState({page:1,count:10,status:"true"}),c=[{id:1,title:"ID",dataIndex:"id",key:"id",render:t=>e.jsx(j,{to:`/admin/department/${t}`,children:t}),renderCsv:t=>t},{id:2,title:"Name",dataIndex:"name",key:"name",render:(t,{id:p})=>e.jsx(j,{to:`/admin/department/${p}`,children:t}),renderCsv:t=>t},{id:3,title:"Created At",dataIndex:"createdAt",key:"createdAt",render:t=>y(t).format("YYYY-MM-DD"),renderCsv:t=>y(t).format("YYYY-MM-DD")},{id:4,title:"",key:"action",render:({id:t,status:p,name:x})=>[{label:e.jsx(v,{title:"View",path:`/admin/department/${t}`}),key:"view"},{label:e.jsx(O,{values:{id:t,status:p},title:p==="true"?"Hide":"Show",permission:"delete-department",deleteThunk:M,loadThunk:h,query:n,className:"bg-white text-black"}),key:"delete"}],csvOff:!0}];o.useEffect(()=>{s(h(n))},[s,n]);const d=[{key:"status",label:"Status",type:"select",options:[{label:"Show",value:"true"},{label:"Hide",value:"false"}],className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[200px]"}];return e.jsx(T,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Departments",extra:e.jsx(q,{permission:"create-department",title:"Create Department",width:35,children:e.jsx(H,{})}),children:e.jsx(F,{permission:"readAll-department",children:e.jsx(L,{total:a,columns:c,list:i,loading:l,setPageConfig:r,title:"Department List",filters:d})})})},J=z;function me(){return e.jsxs(P,{children:[e.jsx(g,{path:"/department",element:e.jsx(D,{permission:"readAll-department",children:e.jsx(J,{})})}),e.jsx(g,{path:"/department/:id",element:e.jsx(D,{permission:"readSingle-department",children:e.jsx(G,{})})})]})}export{me as default};
