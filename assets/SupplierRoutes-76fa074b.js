import{j as e,L as p,k as h,bh as E,o as C,u as b,b as I,r as m,br as Y,bs as B,bt as M,q as V,bu as z,F as x,a5 as q,a0 as U,a1 as G,C as H,I as f,B as K,bv as O,bw as _,N as W,x as J,y}from"./index-16ff5701.js";import{b as Q,T as X,c as A,L as Z,P as g}from"./AdminLayout-ac80ae52.js";import{d as N,C as j,a as ee,U as te,T as ae}from"./TableComponent-f70e0475.js";import{L as S}from"./List-ddf690f6.js";import{u as T}from"./useCurrency-ff395f2c.js";import{V as $}from"./ViewBtn-eedc84ae.js";import"./UploadMany-ab6f4635.js";import{C as se}from"./CommonDelete-6a643bdc.js";import{E as le}from"./EditOutlined-f754bc7b.js";import{a as v}from"./Button-81cb4f36.js";import{R as re}from"./ReportTable-1374d75d.js";import{i as ne}from"./invoiceGenerator-91e8874d.js";import{n as de}from"./numberToWords-4c291141.js";import{T as oe}from"./index-1ab3c210.js";import{C as ie}from"./CreateDrawer-33537b52.js";import{A as pe}from"./addSup-096a94aa.js";import"./index-8b1cef28.js";import"./useForceUpdate-5b1eefe7.js";import"./DeleteOutlined-e1f8fe69.js";import"./jspdf.es.min-3ec80e90.js";function ue({list:l,linkTo:a}){const s=[{title:"Invoice ",dataIndex:"id",key:"id",render:r=>e.jsx(p,{to:`${a}/${r}`,children:r})},{title:"Date",dataIndex:"date",key:"date",render:r=>h(r).format("ll")},{title:"Total Amount",dataIndex:"totalAmount",key:"total_amount"},{title:"Total Tax",dataIndex:"totalTax",key:"totalTax"},{title:"Paid",dataIndex:"paidAmount",key:"paid_amount",responsive:["md"]},{title:"Due",dataIndex:"dueAmount",key:"dueAmount",responsive:["md"]},{title:"",dataIndex:"",key:"action",render:({id:r,dueAmount:o})=>[{label:e.jsx($,{title:"View",path:`${a}/${r}`}),key:"view"},{label:e.jsx(p,{to:o?`/admin/payment/supplier/${r}`:"#",state:{dueAmount:o},children:e.jsxs("button",{className:"flex items-center gap-2 rounded disabled:cursor-not-allowed",disabled:!o,children:[e.jsx(Q,{className:"text-[1rem]"})," Payment"]})}),key:"payment"}]}],t=r=>r.map(o=>({...o,key:o.id}));return e.jsx("div",{className:"m-2",children:e.jsx(N,{scroll:{x:!0},loading:!l,columns:s,data:l?t(l):[]})})}const me=({list:l})=>{const a=[{title:"ID",dataIndex:"id",key:"id"},{title:"Date",dataIndex:"date",key:"date",render:t=>h(t).format("ll")},{title:"Total Amount",key:"totalAmount",render:({totalAmount:t,tax:r})=>`${t+(r||0)}`},{title:"Note",dataIndex:"note",key:"note"},{title:"Purchase Invoice No",dataIndex:"purchaseInvoiceId",key:"purchaseInvoiceId",render:t=>e.jsx(p,{to:`/admin/purchase/${t}`,children:t})}],s=t=>t.map(r=>({...r,key:r.id}));return e.jsx("div",{className:"m-2",children:e.jsx(N,{scroll:{x:!0},columns:a,data:l?s(l):[]})})},ce=({list:l})=>{const a=[{title:"ID",dataIndex:"id",key:"id",render:t=>e.jsx(p,{to:`/admin/transaction/${t}`,children:t})},{title:"Date",dataIndex:"date",key:"date",render:t=>h(t).format("ll")},{title:"Debit",dataIndex:"debit",key:"debit",render:t=>e.jsx(p,{to:`/admin/account/${t==null?void 0:t.id}`,children:t==null?void 0:t.name})},{title:"Credit",dataIndex:"credit",key:"credit",render:t=>e.jsx(p,{to:`/admin/account/${t==null?void 0:t.id}`,children:t==null?void 0:t.name})},{title:"Amount",dataIndex:"amount",key:"amount"},{title:"Type ",dataIndex:"type",key:"type"},{title:"Particulars",dataIndex:"particulars",key:"particulars",render:t=>e.jsx("div",{title:t,children:E(t,20)})}],s=t=>t.map(r=>({...r,key:r.id}));return e.jsx("div",{className:"m-2",children:e.jsx(N,{scroll:{x:!0},columns:a,data:l?s(l):[]})})},xe=()=>{const{id:l}=C();T();const a=b(),s=I(t=>t.suppliers.supplier);return m.useEffect(()=>(a(Y(l)),()=>{a(B())}),[a,l]),e.jsx("div",{children:e.jsx("div",{className:"",children:s?e.jsx(m.Fragment,{children:e.jsxs("div",{className:"flex gap-2 md:gap-4",children:[e.jsxs(j,{className:"w-2/3",bodyClass:"p-0",children:[e.jsx("div",{className:"flex justify-between mx-2 py-2 border-b items-center",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(p,{className:" bg-primary text-white rounded py-2 px-3 d-inline-block",to:`/admin/supplier/${s.id}/update`,state:{data:s},children:e.jsx(le,{})}),e.jsx(se,{permission:"delete-supplier",deleteThunk:M,id:l,navigatePath:"/admin/supplier",className:"p-3 cursor-pointer"})]})}),e.jsxs(X,{className:"mt-4",children:[e.jsx(A,{label:e.jsxs("span",{children:["Supplier Invoice"," ",e.jsx("span",{className:"ml-2 rounded-full bg-slate-300 text-slate-700 px-1",children:s.totalPurchaseInvoice})]}),children:e.jsx(ue,{list:s.purchaseInvoice,linkTo:"/admin/purchase"})}),e.jsx(A,{label:e.jsxs("span",{children:["Supplier Return Invoice"," ",e.jsx("span",{className:"ml-2 rounded-full bg-slate-300 text-slate-700 px-1",children:s.totalReturnPurchaseInvoice})]}),children:e.jsx(me,{list:s.returnPurchaseInvoice})}),e.jsx(A,{label:"Transactions",children:e.jsx(ce,{list:s.allTransaction})})]})]}),e.jsxs("div",{className:"w-1/3 flex flex-col gap-2 md:gap-4",children:[e.jsx(j,{title:"Supplier",children:e.jsx(S,{labelClassName:"w-[30%]",list:[{label:"Name",value:s.name},{label:"Email",value:s.email||"N/A"},{label:"Phone",value:s.phone},{label:"Address",value:s.address}]})}),e.jsx(j,{children:e.jsx(S,{labelClassName:"w-[30%]",list:[{label:"Total Amount",value:s.totalAmount},{label:"Paid Amount",value:e.jsx("div",{className:"before:content-['-'] relative before:absolute before:text-red-500 before:font-bold before:-left-3 before:top-0",children:s.totalPaidAmount})},{label:"Return Amount",value:e.jsx("div",{className:"before:content-['-'] relative before:absolute before:text-red-500 before:font-bold before:-left-3 before:top-0",children:s.totalReturnAmount}),className:"border-b pb-1"},{label:"Due Amount",value:s.dueAmount}]})})]})]})},s.id):e.jsx(Z,{})})})},he=xe;function P({data:l,info:a,title:s,type:t,btnName:r}){const{currencySymbol:o}=T()||{},c=I(d=>{var k;return(k=d==null?void 0:d.setting)==null?void 0:k.data})||null;b(),de(Math.round((l==null?void 0:l.totalAmount)-(l==null?void 0:l.discount)));const i=V(o),n=[],u=[{label:"Total",value:`${i}${a!=null&&a.grandTotalAmount?a.grandTotalAmount:0}`},{label:"Due",value:`${i}${a!=null&&a.grandDueAmount?a.grandDueAmount:0}`},{label:"Paid",value:`${i}${a!=null&&a.grandTotalPaidAmount?a.grandTotalPaidAmount:0}`},{label:"Return",value:`${i}${a!=null&&a.grandTotalReturnAmount?a.grandTotalReturnAmount:0}`},{label:"Instant Paid Return ",value:`${i}${a!=null&&a.grandInstantPaidReturnAmount?a.grandInstantPaidReturnAmount:0}`}],D=["Date","Id","Name","Phone","Address","Total Amount","Total Paid","Total Due"],R=l.map(d=>[h(d.createdAt).format("YYYY-MM-DD"),d.id,d.name,d.phone,d.address,`${i}${d!=null&&d.totalAmount?d.totalAmount:0}`,`${i}${d!=null&&d.totalPaidAmount?d.totalPaidAmount:0}`,`${i}${d!=null&&d.totalDueAmount?d.totalDueAmount:0}`]),w=[],F=[{value:`Report Date: ${h().format("YYYY-MM-DD")}`,style:{bold:!0,fontSize:12}}],L={jsPDF:{},tableFontSize:10,infoTopFontSize:8,bottomRightFontSize:12,bottomLeftFontSize:8,footerFontSize:10};return e.jsx("div",{className:"flex gap-2",children:e.jsx(v,{className:"bg-primary flex  justify-center items-center px-4 py-2 text-white rounded",onClick:()=>ne(t,{title:s,TopRightInfo:F,companyInfo:c,customerInfo:w,bottomLeftContent:n,bottomRightContent:u,tableBody:R,tableHead:D,settings:L}),children:r})})}function je(){const l=b(),[a,s]=m.useState(!1),{list:t,loading:r,info:o}=I(n=>n.suppliers),c=[{id:1,title:"ID",dataIndex:"id",key:"id",render:n=>e.jsx(p,{to:`/admin/supplier/${n}`,children:n})},{id:2,title:"Name",dataIndex:"name",key:"name",render:(n,{id:u})=>e.jsx(p,{to:`/admin/supplier/${u}`,children:n})},{id:3,title:"Phone",dataIndex:"phone",key:"phone"},{id:4,title:"Address",dataIndex:"address",key:"address",responsive:["md"]}],i=[{id:1,title:"Date",dataIndex:"createdAt",key:"createdAt",renderCSV:n=>h(n).format("DD-MM-YYYY")},{id:1,title:"ID",dataIndex:"id",key:"id"},{id:2,title:"Name",dataIndex:"name",key:"name",render:(n,{id:u})=>e.jsx(p,{to:`/admin/supplier/${u}`,children:n})},{id:3,title:"Phone",dataIndex:"phone",key:"phone"},{id:4,title:"Address",dataIndex:"address",key:"address",responsive:["md"]},{id:4,title:"Total",dataIndex:"totalAmount",key:"totalAmount",responsive:["md"]},{id:4,title:"Paid",dataIndex:"totalPaidAmount",key:"totalPaidAmount",responsive:["md"]},{id:4,title:"Due",dataIndex:"dueAmount",key:"dueAmount",responsive:["md"]},{id:4,title:"Return",dataIndex:"totalReturnAmount",key:"totalReturnAmount",responsive:["md"]}];return m.useEffect(()=>{l(z())},[l]),e.jsx("div",{className:"card card-custom mt-3 ",children:e.jsx("div",{className:"card-body",children:e.jsxs(j,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Supplier Report",children:[e.jsxs("div",{className:"flex justify-between py-5 items-start ",children:[e.jsx("div",{children:e.jsx(v,{onClick:()=>s(!0),className:"bg-green-500 text-white",children:"Generate Report"})}),e.jsxs("div",{className:"flex  items-center gap-2 ",children:[!r&&t?e.jsx(P,{data:t,info:o,title:"Supplier Report",type:"print",btnName:"Print"}):e.jsx("div",{children:e.jsx(v,{loading:r||!t,className:"bg-primary text-white",children:"Print"})}),!r&&t?e.jsx(P,{data:t,info:o,title:"Supplier Report",type:"download",btnName:"Export PDF"}):e.jsx("div",{children:e.jsx(v,{loading:r||!t,className:"bg-primary text-white",children:"Export PDF"})}),e.jsx("div",{children:e.jsx(ee,{list:t,columns:i,title:"Supplier Report",className:"bg-primary",btnName:"Export CSV"})})]})]}),a&&e.jsx(re,{list:t,columns:c,loading:r})]})})})}function be(){const l=b(),{Title:a}=oe,[s]=x.useForm(),{id:t}=C(),[r,o]=m.useState(),c=q(),{data:i}=c.state,n=async u=>{await l(O({id:t,values:u})),o(!1)};return e.jsx(m.Fragment,{children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"",children:e.jsx(U,{className:"mr-top",children:e.jsx(G,{xs:24,sm:24,md:12,lg:12,xl:14,className:"border rounded column-design ",children:e.jsxs(H,{bordered:!1,className:"criclebox h-full",children:[e.jsx(a,{level:3,className:"m-3 text-center",children:"Edit Supplier Form"}),e.jsxs(x,{initialValues:{...i},form:s,className:"m-4",name:"basic",labelCol:{span:5},wrapperCol:{span:16},onFinish:n,onFinishFailed:()=>o(!1),autoComplete:"off",children:[e.jsx(x.Item,{style:{marginBottom:"10px"},fields:[{name:"Name"}],label:"Name",name:"name",rules:[{required:!0,message:"Please input supplier name!"}],children:e.jsx(f,{})}),e.jsx(x.Item,{style:{marginBottom:"10px"},label:"Phone",name:"phone",rules:[{required:!0,message:"Please input supplier Phone!"}],children:e.jsx(f,{})}),e.jsx(x.Item,{style:{marginBottom:"10px"},label:"Address",name:"address",rules:[{required:!0,message:"Please input supplier Address!"}],children:e.jsx(f,{})}),e.jsx(x.Item,{style:{marginBottom:"10px"},wrapperCol:{offset:5,span:16},children:e.jsx(K,{onClick:()=>o(!0),block:!0,type:"primary",htmlType:"submit",shape:"round",loading:r,children:"Update Now"})})]})]})})})})})})}const ye=()=>{const l=b(),{list:a,total:s,loading:t}=I(n=>n.suppliers),r=[{id:1,title:"ID",dataIndex:"id",key:"id",render:n=>e.jsx(p,{to:`/admin/supplier/${n}`,children:n}),renderCsv:n=>n},{id:2,title:"Name",dataIndex:"name",key:"name",render:(n,{id:u})=>e.jsx(p,{to:`/admin/supplier/${u}`,children:n}),renderCsv:n=>n},{id:3,title:"Phone",dataIndex:"phone",key:"phone"},{id:4,title:"Address",dataIndex:"address",key:"address",responsive:["md"]},{id:5,title:"Action",key:"Action",render:({id:n})=>e.jsx($,{path:`/admin/supplier/${n}`}),csvOff:!0}],o=[{key:"status",label:"Status",type:"select",options:[{label:"Show",value:"true"},{label:"Hide",value:"false"}],className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[200px]"}],[c,i]=m.useState({page:1,count:10,status:"true"});return m.useEffect(()=>{l(_(c))},[l,c]),e.jsx(j,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Supplier List",extra:e.jsx(ie,{permission:"create-supplier",title:"Create Supplier",width:35,children:e.jsx(pe,{})}),children:e.jsx(te,{permission:"readAll-supplier",children:e.jsx(ae,{list:a,total:s,loading:t,columns:r,setPageConfig:i,title:"Supplier List",filters:o,isSearch:!0})})})};m.createContext();const ge=l=>!localStorage.getItem("isLogged")?e.jsx(W,{to:"/admin/auth/login",replace:!0}):e.jsx(e.Fragment,{children:e.jsx(ye,{})}),ve=ge;function ze(){return e.jsxs(J,{children:[e.jsx(y,{path:"/supplier",exact:!0,element:e.jsx(g,{permission:"readAll-supplier",children:e.jsx(ve,{})})}),e.jsx(y,{path:"/supplier-report",exact:!0,element:e.jsx(g,{permission:"readAll-supplier",children:e.jsx(je,{})})}),e.jsx(y,{path:"/supplier/:id",element:e.jsx(g,{permission:"readSingle-supplier",children:e.jsx(he,{})})}),e.jsx(y,{path:"/supplier/:id/update",element:e.jsx(g,{permission:"update-supplier",children:e.jsx(be,{})})})]})}export{ze as default};
