import{r as u,u as j,F as o,b as y,j as e,dj as b,I as k,B as P,ds as E,dt as w,o as O,du as $,L as x,dv as A,dw as T,dx as R,x as D,y as g}from"./index-16ff5701.js";import{L,P as S}from"./AdminLayout-ac80ae52.js";import{C as N,d as q,U as B,T as U}from"./TableComponent-f70e0475.js";import{V as I}from"./ViewBtn-eedc84ae.js";import{C}from"./CreateDrawer-33537b52.js";import{d as f}from"./dayjs.min-72f12467.js";import{w as V}from"./Button-81cb4f36.js";import{D as _}from"./index-f03f7796.js";import{C as W}from"./CommonDelete-6a643bdc.js";import"./index-8b1cef28.js";import"./useForceUpdate-5b1eefe7.js";import"./EditOutlined-f754bc7b.js";import"./DeleteOutlined-e1f8fe69.js";var G=globalThis&&globalThis.__rest||function(s,l){var r={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&l.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(s);i<a.length;i++)l.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(s,a[i])&&(r[a[i]]=s[a[i]]);return r};const{TimePicker:Y,RangePicker:K}=_,M=u.forwardRef((s,l)=>u.createElement(K,Object.assign({},s,{picker:"time",mode:void 0,ref:l}))),h=u.forwardRef((s,l)=>{var{addon:r,renderExtraFooter:a}=s,i=G(s,["addon","renderExtraFooter"]);const n=u.useMemo(()=>{if(a)return a;if(r)return r},[r,a]);return u.createElement(Y,Object.assign({},i,{mode:void 0,ref:l,renderExtraFooter:n}))}),v=V(h,"picker");h._InternalPanelDoNotUseOrYouWillBeFired=v;h.RangePicker=M;h._InternalPanelDoNotUseOrYouWillBeFired=v;const p=h;function z({id:s}){const l=j(),[r]=o.useForm(),[a,i]=u.useState(!1),{shift:n,loading:m}=y(d=>d.shift),c=async d=>{i(!0);const F={...d,startTime:d.startTime?f(d.startTime).format("HH:mm:ss"):null,endTime:d.endTime?f(d.endTime).format("HH:mm:ss"):null};try{(await l(E({id:s,values:F}))).payload.message==="success"&&l(w(s)),i(!1)}catch{i(!1)}},t=d=>{i(!1)};return e.jsxs("div",{className:" h-full",children:[e.jsx(b,{level:4,className:"m-3 text-center",children:"Create Shift"}),e.jsxs(o,{form:r,name:"basic",layout:"vertical",className:"sm:mx-10",onFinish:c,initialValues:{...n,startTime:n!=null&&n.startTime?f(n==null?void 0:n.startTime,"HH:mm:ss"):null,endTime:n!=null&&n.endTime?f(n==null?void 0:n.endTime,"HH:mm:ss"):null},onFinishFailed:t,children:[e.jsx(o.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please enter Shift Name!"}],children:e.jsx(k,{})}),e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx(o.Item,{className:"w-full",label:"Start Time",name:"startTime",rules:[{required:!0,message:"Please select Start Time!"}],children:e.jsx(p,{})}),e.jsx(o.Item,{className:"w-full",label:"End Time",name:"endTime",rules:[{required:!0,message:"Please select end Time!"}],children:e.jsx(p,{})})]}),e.jsx(o.Item,{style:{marginBottom:"10px"},className:"flex justify-center mt-6",children:e.jsx(P,{type:"primary",htmlType:"submit",shape:"round",loading:a,children:"Update Shift"})})]})]})}function J(){const{id:s}=O(),l=j(),{shift:r,loading:a}=y(m=>m.shift),i=[{id:1,title:"ID",dataIndex:"id",key:"id",render:m=>e.jsx(x,{to:`/admin/hr/staffs/${m}`,children:m})},{id:2,title:"Name",dataIndex:"username",key:"username",render:(m,{id:c})=>e.jsx(x,{to:`/admin/hr/staffs/${c}`,children:m})},{id:6,title:"action",key:"Action",render:({id:m})=>e.jsx(I,{path:`/admin/hr/staffs/${m}`})}];u.useEffect(()=>(l(w(s)),()=>{l($())}),[l,s]);const n=m=>m.map(c=>({...c,key:c.id}));return e.Fragment,r==null||r.name,e.jsx("div",{children:r?e.jsx(N,{title:e.jsx("span",{className:"mr-left",children:r.name}),extra:e.jsx(e.Fragment,{children:e.jsx(C,{permission:"update-shift",title:"Update Shift",update:!0,color:"bg-gray-700",width:30,children:e.jsx(z,{id:s})})}),children:e.jsx("div",{className:"mt-4",children:e.jsx(q,{scroll:{x:!0},loading:a,columns:i,data:r!=null&&r.user?n(r==null?void 0:r.user):[]})})}):e.jsx(L,{})})}function Q(){const s=j(),[l]=o.useForm(),[r,a]=u.useState(!1),i=async m=>{a(!0);try{const c={...m,startTime:m.startTime.format("HH:mm"),endTime:m.endTime.format("HH:mm")};(await s(A(c))).payload.message==="success"&&(l.resetFields(),s(T({}))),a(!1)}catch{a(!1)}},n=m=>{a(!1)};return e.jsxs("div",{className:" h-full",children:[e.jsx(b,{level:4,className:"m-3 text-center",children:"Create Shift"}),e.jsxs(o,{form:l,name:"basic",layout:"vertical",className:"sm:mx-10",onFinish:i,onFinishFailed:n,children:[e.jsx(o.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please enter Shift Name!"}],children:e.jsx(k,{})}),e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx(o.Item,{className:"w-full",label:"Start Time",name:"startTime",rules:[{required:!0,message:"Please select Start Time!"}],children:e.jsx(p,{})}),e.jsx(o.Item,{className:"w-full",label:"End Time",name:"endTime",rules:[{required:!0,message:"Please select end Time!"}],children:e.jsx(p,{})})]}),e.jsx(o.Item,{style:{marginBottom:"10px"},className:"flex justify-center mt-6",children:e.jsx(P,{type:"primary",htmlType:"submit",shape:"round",loading:r,children:"Create Shift"})})]})]})}const X=()=>{const s=j(),{list:l,total:r,loading:a}=y(t=>t.shift),[i,n]=u.useState({page:1,count:10,status:"true"}),m=[{id:1,title:"ID",dataIndex:"id",key:"id",render:t=>e.jsx(x,{to:`/admin/shift/${t}`,children:t}),renderCsv:t=>t},{id:2,title:"Name",dataIndex:"name",key:"name",render:(t,{id:d})=>e.jsx(x,{to:`/admin/shift/${d}`,children:t}),renderCsv:t=>t},{id:3,title:"Work Hour",dataIndex:"workHour",key:"workHour",render:t=>`${t} Hours`,renderCsv:t=>`${t} Hours`},{id:5,title:"Start Time",dataIndex:"startTime",key:"startTime",render:t=>f(`2023-11-22T${t}`).format("h:mm A"),renderCsv:t=>f(`2023-11-22T${t}`).format("h:mm A")},{id:4,title:"End Time",dataIndex:"endTime",key:"endTime",render:t=>f(`2023-11-22T${t}`).format("h:mm A"),renderCsv:t=>f(`2023-11-22T${t}`).format("h:mm A")},{id:4,title:"",key:"action",render:({id:t,status:d})=>[{label:e.jsx(I,{title:"View",path:`/admin/shift/${t}`}),key:"view"},{label:e.jsx(W,{values:{id:t,status:d},title:d==="true"?"Hide":"Show",permission:"delete-shift",deleteThunk:R,loadThunk:T,query:i,className:"bg-white text-black"}),key:"delete"}],csvOff:!0}];u.useEffect(()=>{s(T(i))},[s,i]);const c=[{key:"status",label:"Status",type:"select",options:[{label:"Show",value:"true"},{label:"Hide",value:"false"}],className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[200px]"}];return e.jsx(N,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Shift List",extra:e.jsx(C,{permission:"create-shift",title:"Create Shift",width:35,children:e.jsx(Q,{})}),children:e.jsx(B,{permission:"readAll-shift",children:e.jsx(U,{total:r,columns:m,list:l,loading:a,setPageConfig:n,title:"Shift List",filters:c})})})},Z=X;function fe(){return e.jsxs(D,{children:[" ",e.jsx(g,{path:"/shift",element:e.jsx(S,{permission:"readAll-shift",children:e.jsx(Z,{})})}),e.jsx(g,{path:"/shift/:id",element:e.jsx(S,{permission:"readSingle-shift",children:e.jsx(J,{})})})]})}export{fe as default};
