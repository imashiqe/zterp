import{F as u,r as d,o as w,u as y,j as e,I as F,B as E,bx as L,bj as C,b as S,by as Y,bz as $,C as T,L as f,k as P,bA as B,N as M,x as U,y as j}from"./index-16ff5701.js";import{L as V,P as g}from"./AdminLayout-ac80ae52.js";import{V as I}from"./ViewBtn-eedc84ae.js";import{C as R,U as q,T as H}from"./TableComponent-f70e0475.js";import{C as A}from"./CreateDrawer-33537b52.js";import{T as O}from"./TableNoPagination-c83d1dd6.js";import{A as z}from"./index-1b45a375.js";import{A as G}from"./addProductCategory-004b5cd6.js";import{M as J}from"./ModalUi-03657474.js";import{C as K}from"./CommonDelete-6a643bdc.js";import{E as Q}from"./EditOutlined-f754bc7b.js";import"./Button-81cb4f36.js";import"./index-8b1cef28.js";import"./useForceUpdate-5b1eefe7.js";import"./InfoCircleFilled-829db91a.js";import"./UploadMany-ab6f4635.js";import"./DeleteOutlined-e1f8fe69.js";function b({category:r,modal:a,onClose:s}){const[o]=u.useForm(),[l,i]=d.useState(!1),{id:c}=w(),n=y(),[p,N]=d.useState({name:r.name}),[x,t]=d.useState(),h=async k=>{var v;try{const m=await n(L({id:a?r==null?void 0:r.id:c,values:k}));((v=m==null?void 0:m.payload)==null?void 0:v.message)==="success"&&a&&(n(C({page:1,count:10,status:"true"})),s()),t(!1)}catch{t(!1)}},D=k=>{};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"",children:[l&&e.jsx("div",{children:e.jsx(z,{message:"Category details updated successfully",type:"success",closable:!0,showIcon:!0})}),e.jsxs(u,{initialValues:{...p},form:o,className:"m-4",name:"basic",layout:"vertical",onFinish:h,onFinishFailed:D,autoComplete:"off",children:[e.jsx(u.Item,{style:{marginBottom:"10px"},fields:[{name:"Name"}],label:"Name",name:"name",rules:[{required:!0,message:"Please input Category name!"}],children:e.jsx(F,{})}),e.jsx(u.Item,{style:{marginBottom:"10px"},children:e.jsx(E,{onClick:()=>t(!0),block:!0,type:"primary",htmlType:"submit",shape:"round",loading:x,children:"Update Now"})})]})]})})})}const W=()=>{const{id:r}=w(),a=y(),s=S(i=>i.productCategories.category),o=[{id:1,title:"ID",dataIndex:"id",key:"id"},{id:2,title:"Name",dataIndex:"name",key:"name",render:(i,{id:c})=>e.jsx(f,{to:`/admin/product-subcategory/${c}`,children:i})},{id:3,title:"action",key:"Action",render:({id:i})=>e.jsx(I,{path:`/admin/product-subcategory/${i}`})}];d.useEffect(()=>(a(Y(r)),()=>{a($())}),[a,r]);const l=e.jsx(e.Fragment,{children:e.jsxs("h5",{className:"text-lg",children:["Products under ",e.jsxs("strong",{children:[s==null?void 0:s.name," "]})]})});return e.jsx("div",{children:e.jsx("div",{className:"mr-top",children:s?e.jsxs(T,{className:"border-0 md:border md:p-6 bg-transparent md:bg-[#fafafa]",bodyStyle:{padding:0},children:[e.jsxs("div",{className:"md:flex flex justify-between md:mb-8 items-center gap-2",children:[e.jsx("h5",{className:"flex items-center",children:e.jsx("span",{className:"mr-left",children:s.name})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(A,{permission:"update-productCategory",title:"Update Category",update:!0,color:"bg-gray-700",width:30,children:e.jsx(b,{category:s})})})]}),e.jsx(O,{list:s==null?void 0:s.productSubCategory,columns:o,csvFileName:"SubCategory",rightElement:l})]},s.id):e.jsx(V,{})})})},X=W,Z=r=>{const a=y(),[s,o]=d.useState(!1),{list:l,total:i,loading:c}=S(t=>t.productCategories),[n,p]=d.useState({page:1,count:10,status:"true"}),N=[{id:1,title:"ID",dataIndex:"id",key:"id",render:t=>e.jsx(f,{to:`/admin/product-category/${t}`,children:t}),renderCsv:t=>t},{id:2,title:"Name",dataIndex:"name",key:"name",render:(t,{id:h})=>e.jsx(f,{to:`/admin/product-category/${h}`,children:t}),renderCsv:t=>t},{id:3,title:"Created At",dataIndex:"createdAt",key:"createdAt",render:t=>P(t).format("YYYY-MM-DD"),renderCsv:t=>P(t).format("YYYY-MM-DD")},{id:13,title:"",key:"action",render:t=>[{label:e.jsx(I,{title:"view",path:`/admin/product-category/${t==null?void 0:t.id}`}),key:"view"},{label:e.jsxs("div",{onClick:()=>{o(t)},className:"flex gap-2  items-center cursor-pointer",children:[e.jsx(Q,{className:"text-[1rem]"}),"Edit"]}),key:"edit"},{label:e.jsx(K,{values:{id:t==null?void 0:t.id,status:t==null?void 0:t.status},title:(t==null?void 0:t.status)==="true"?"Hide":"Show",permission:"delete-productCategory",deleteThunk:B,loadThunk:C,query:n,className:"bg-white text-black"}),key:"delete"}],csvOff:!0}],x=[{key:"status",label:"Status",type:"select",options:[{label:"Show",value:"true"},{label:"Hide",value:"false"}],className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[200px]"}];return d.useEffect(()=>{a(C(n))},[a,n]),e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Product Category",extra:e.jsx("div",{className:"flex justify-between md:justify-start gap-3 items-center",children:e.jsx(A,{permission:"create-productCategory",title:"Create Category",width:35,children:e.jsx(G,{})})}),children:e.jsx(q,{permission:"readAll-productCategory",children:e.jsx(H,{list:l,total:i,loading:c,columns:N,filters:x,title:"Product Category List",setPageConfig:p,isSearch:!0})})}),e.jsx(J,{outsideClick:!0,open:s,title:"Edit Product Category",className:"bg-white",onClose:()=>o(!1),children:e.jsx(b,{modal:!0,category:s,onClose:()=>o(!1)})})]})},_=r=>!localStorage.getItem("isLogged")?e.jsx(M,{to:"/admin/auth/login",replace:!0}):e.jsx(e.Fragment,{children:e.jsx(Z,{})}),ee=_;function Ce(){return e.jsxs(U,{children:[" ",e.jsx(j,{path:"/product-category",exact:!0,element:e.jsx(g,{permission:"readAll-productCategory",children:e.jsx(ee,{})})}),e.jsx(j,{path:"/product-category/:id",element:e.jsx(g,{permission:"readSingle-productCategory",children:e.jsx(X,{})})}),e.jsx(j,{path:"/product-category/:id/update",element:e.jsx(g,{permission:"update-productCategory",children:e.jsx(b,{})})})]})}export{Ce as default};
