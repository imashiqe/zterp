import{ar as oe,as as le,at as ce,av as ie,ag as z,ai as I,A as S,aA as se,R as u,z as L,r as C,E as $,H as X,_ as M}from"./index-16ff5701.js";var ue=["b"],fe=["v"],V=function(e){return Math.round(Number(e||0))},de=function(e){if(e&&z(e)==="object"&&"h"in e&&"b"in e){var t=e,o=t.b,a=I(t,ue);return S(S({},a),{},{v:o})}return typeof e=="string"&&/hsb/.test(e)?e.replace(/hsb/,"hsv"):e},A=function(r){oe(t,r);var e=le(t);function t(o){return ce(this,t),e.call(this,de(o))}return ie(t,[{key:"toHsbString",value:function(){var a=this.toHsb(),n=V(a.s*100),l=V(a.b*100),c=V(a.h),i=a.a,s="hsb(".concat(c,", ").concat(n,"%, ").concat(l,"%)"),g="hsba(".concat(c,", ").concat(n,"%, ").concat(l,"%, ").concat(i.toFixed(i===0?0:2),")");return i===1?s:g}},{key:"toHsb",value:function(){var a=this.toHsv();z(this.originalInput)==="object"&&this.originalInput&&"h"in this.originalInput&&(a=this.originalInput);var n=a;n.v;var l=I(n,fe);return S(S({},l),{},{b:a.v})}}]),t}(se),ve="rc-color-picker",H=function(e){return e instanceof A?e:new A(e)},ge=H("#1677ff"),W=function(e){var t=e.offset,o=e.targetRef,a=e.containerRef,n=e.color,l=e.type,c=a.current.getBoundingClientRect(),i=c.width,s=c.height,g=o.current.getBoundingClientRect(),f=g.width,b=g.height,d=f/2,h=b/2,v=(t.x+d)/i,p=1-(t.y+h)/s,m=n.toHsb(),x=v,y=(t.x+d)/i*360;if(l)switch(l){case"hue":return H(S(S({},m),{},{h:y<=0?0:y}));case"alpha":return H(S(S({},m),{},{a:x<=0?0:x}))}return H({h:m.h,s:v<=0?0:v,b:p>=1?1:p,a:m.a})},F=function(e,t,o,a){var n=e.current.getBoundingClientRect(),l=n.width,c=n.height,i=t.current.getBoundingClientRect(),s=i.width,g=i.height,f=s/2,b=g/2,d=o.toHsb();if(!(s===0&&g===0||s!==g)){if(a)switch(a){case"hue":return{x:d.h/360*l-f,y:-b/3};case"alpha":return{x:d.a/1*l-f,y:-b/3}}return{x:d.s*l-f,y:(1-d.b)*c-b}}},he=function(e){var t=e.color,o=e.prefixCls,a=e.className,n=e.style,l=e.onClick,c="".concat(o,"-color-block");return u.createElement("div",{className:L(c,a),style:n,onClick:l},u.createElement("div",{className:"".concat(c,"-inner"),style:{background:t}}))};function me(r){var e="touches"in r?r.touches[0]:r,t=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,o=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;return{pageX:e.pageX-t,pageY:e.pageY-o}}function G(r){var e=r.offset,t=r.targetRef,o=r.containerRef,a=r.direction,n=r.onDragChange,l=r.onDragChangeComplete,c=r.calculate,i=r.color,s=r.disabledDrag,g=C.useState(e||{x:0,y:0}),f=$(g,2),b=f[0],d=f[1],h=C.useRef(null),v=C.useRef(null),p=C.useRef({flag:!1});C.useEffect(function(){if(p.current.flag===!1){var R=c==null?void 0:c(o);R&&d(R)}},[i,o]),C.useEffect(function(){return function(){document.removeEventListener("mousemove",h.current),document.removeEventListener("mouseup",v.current),document.removeEventListener("touchmove",h.current),document.removeEventListener("touchend",v.current),h.current=null,v.current=null}},[]);var m=function(E){var O=me(E),w=O.pageX,D=O.pageY,N=o.current.getBoundingClientRect(),K=N.x,Q=N.y,Z=N.width,ee=N.height,Y=t.current.getBoundingClientRect(),P=Y.width,_=Y.height,te=P/2,re=_/2,ae=Math.max(0,Math.min(w-K,Z))-te,ne=Math.max(0,Math.min(D-Q,ee))-re,B={x:ae,y:a==="x"?b.y:ne};if(P===0&&_===0||P!==_)return!1;d(B),n==null||n(B)},x=function(E){E.preventDefault(),m(E)},y=function(E){E.preventDefault(),p.current.flag=!1,document.removeEventListener("mousemove",h.current),document.removeEventListener("mouseup",v.current),document.removeEventListener("touchmove",h.current),document.removeEventListener("touchend",v.current),h.current=null,v.current=null,l==null||l()},k=function(E){document.removeEventListener("mousemove",h.current),document.removeEventListener("mouseup",v.current),!s&&(m(E),p.current.flag=!0,document.addEventListener("mousemove",x),document.addEventListener("mouseup",y),document.addEventListener("touchmove",x),document.addEventListener("touchend",y),h.current=x,v.current=y)};return[b,k]}var U=function(e){var t=e.size,o=t===void 0?"default":t,a=e.color,n=e.prefixCls;return u.createElement("div",{className:L("".concat(n,"-handler"),X({},"".concat(n,"-handler-sm"),o==="small")),style:{backgroundColor:a}})},q=function(e){var t=e.children,o=e.style,a=e.prefixCls;return u.createElement("div",{className:"".concat(a,"-palette"),style:S({position:"relative"},o)},t)},J=C.forwardRef(function(r,e){var t=r.children,o=r.offset;return u.createElement("div",{ref:e,style:{position:"absolute",left:o.x,top:o.y,zIndex:1}},t)}),Ce=function(e){var t=e.color,o=e.onChange,a=e.prefixCls,n=e.onChangeComplete,l=e.disabled,c=C.useRef(),i=C.useRef(),s=C.useRef(t),g=G({color:t,containerRef:c,targetRef:i,calculate:function(v){return F(v,i,t)},onDragChange:function(v){var p=W({offset:v,targetRef:i,containerRef:c,color:t});s.current=p,o(p)},onDragChangeComplete:function(){return n==null?void 0:n(s.current)},disabledDrag:l}),f=$(g,2),b=f[0],d=f[1];return u.createElement("div",{ref:c,className:"".concat(a,"-select"),onMouseDown:d,onTouchStart:d},u.createElement(q,{prefixCls:a},u.createElement(J,{offset:b,ref:i},u.createElement(U,{color:t.toRgbString(),prefixCls:a})),u.createElement("div",{className:"".concat(a,"-saturation"),style:{backgroundColor:"hsl(".concat(t.toHsb().h,",100%, 50%)"),backgroundImage:"linear-gradient(0deg, #000, transparent),linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0))"}})))},be=function(e){var t=e.colors,o=e.children,a=e.direction,n=a===void 0?"to right":a,l=e.type,c=e.prefixCls,i=C.useMemo(function(){return t.map(function(s,g){var f=H(s);return l==="alpha"&&g===t.length-1&&f.setAlpha(1),f.toRgbString()}).join(",")},[t,l]);return u.createElement("div",{className:"".concat(c,"-gradient"),style:{position:"absolute",inset:0,background:"linear-gradient(".concat(n,", ").concat(i,")")}},o)},T=function(e){var t=e.gradientColors,o=e.direction,a=e.type,n=a===void 0?"hue":a,l=e.color,c=e.value,i=e.onChange,s=e.onChangeComplete,g=e.disabled,f=e.prefixCls,b=C.useRef(),d=C.useRef(),h=C.useRef(l),v=G({color:l,targetRef:d,containerRef:b,calculate:function(k){return F(k,d,l,n)},onDragChange:function(k){var R=W({offset:k,targetRef:d,containerRef:b,color:l,type:n});h.current=R,i(R)},onDragChangeComplete:function(){s==null||s(h.current,n)},direction:"x",disabledDrag:g}),p=$(v,2),m=p[0],x=p[1];return u.createElement("div",{ref:b,className:L("".concat(f,"-slider"),"".concat(f,"-slider-").concat(n)),onMouseDown:x,onTouchStart:x},u.createElement(q,{prefixCls:f},u.createElement(J,{offset:m,ref:d},u.createElement(U,{size:"small",color:c,prefixCls:f})),u.createElement(be,{colors:t,direction:o,type:n,prefixCls:f})))};function j(r){return r!==void 0}var pe=function(e,t){var o=t.defaultValue,a=t.value,n=C.useState(function(){var s;return j(a)?s=a:j(o)?s=o:s=e,H(s)}),l=$(n,2),c=l[0],i=l[1];return C.useEffect(function(){a&&i(H(a))},[a]),[c,i]},Re=["rgb(255, 0, 0) 0%","rgb(255, 255, 0) 17%","rgb(0, 255, 0) 33%","rgb(0, 255, 255) 50%","rgb(0, 0, 255) 67%","rgb(255, 0, 255) 83%","rgb(255, 0, 0) 100%"];const xe=C.forwardRef(function(r,e){var t=r.value,o=r.defaultValue,a=r.prefixCls,n=a===void 0?ve:a,l=r.onChange,c=r.onChangeComplete,i=r.className,s=r.style,g=r.panelRender,f=r.disabledAlpha,b=f===void 0?!1:f,d=r.disabled,h=d===void 0?!1:d,v=pe(ge,{value:t,defaultValue:o}),p=$(v,2),m=p[0],x=p[1],y=C.useMemo(function(){var w=H(m.toRgbString());return w.setAlpha(1),w.toRgbString()},[m]),k=L("".concat(n,"-panel"),i,X({},"".concat(n,"-panel-disabled"),h)),R={prefixCls:n,onChangeComplete:c,disabled:h},E=function(D,N){t||x(D),l==null||l(D,N)},O=u.createElement(u.Fragment,null,u.createElement(Ce,M({color:m,onChange:E},R)),u.createElement("div",{className:"".concat(n,"-slider-container")},u.createElement("div",{className:L("".concat(n,"-slider-group"),X({},"".concat(n,"-slider-group-disabled-alpha"),b))},u.createElement(T,M({gradientColors:Re,color:m,value:"hsl(".concat(m.toHsb().h,",100%, 50%)"),onChange:function(D){return E(D,"hue")}},R)),!b&&u.createElement(T,M({type:"alpha",gradientColors:["rgba(255, 0, 4, 0) 0%",y],color:m,value:m.toRgbString(),onChange:function(D){return E(D,"alpha")}},R))),u.createElement(he,{color:m.toRgbString(),prefixCls:n})));return u.createElement("div",{className:k,style:s,ref:e},typeof g=="function"?g(O):O)});export{A as C,xe as a,he as b};
