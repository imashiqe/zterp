import{u as $,r as u,e as L,j as t,b5 as R,a3 as c}from"./index-16ff5701.js";import{a as g,Q as T}from"./Button-81cb4f36.js";import{e as k}from"./TableComponent-f70e0475.js";const q=({urlPath:d,loadAllThunk:m,query:b,demoData:h,title:y})=>{const j=$(),[w,i]=u.useState(!1),[l,v]=u.useState(),S=L(),f=new FileReader,N=s=>{v(s.target.files[0])};function C(s){const a=s.split(`
`),n=[],r=a[0].split(",");for(let e=1;e<a.length;e++){const p=a[e].split(",");if(p.length===r.length){const x={};for(let o=0;o<r.length;o++){const U=r[o].trim().replace(/(^['"]|['"]$)/g,""),V=p[o].trim().replace(/(^['"]|['"]$)/g,"");x[U]=V}n.push(x)}}return n}const F=async s=>{var n,r;const a=C(s);try{const e=await R.post(`${d}?query=createmany`,a);console.log(e),(e==null?void 0:e.statusText)==="Created"?(m&&j(m({...b})),c.success("Uploaded Success"),d=="product"&&S("/admin/product")):c.error("Something went wrong, Please try again"),i(!1)}catch(e){i(!1),c.error(((r=(n=e==null?void 0:e.response)==null?void 0:n.data)==null?void 0:r.error)||"Something went wrong")}},D=s=>{s.preventDefault(),i(!0),l&&(f.onload=function(a){const n=a.target.result;F(n)},f.readAsText(l))};return t.jsxs("div",{className:"text-center mt-2  ",children:[!l&&t.jsxs("p",{className:"flex flex-col items-center gap-2 mb-2",style:{color:"red"},children:["Please select a CSV file for uploading",t.jsx(g,{className:"px-5 py-1 max-w-[150px] bg-teal-500 text-white border rounded-md",children:t.jsx(k,{className:" text-white text-xs  md:text-base text-center px-0 py-1 rounded w-[120px]",data:h,filename:y,children:t.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[t.jsx(T,{})," ",t.jsx("span",{children:"Demo CSV"})]})})})]}),t.jsxs("form",{className:"form-group",children:[t.jsx("input",{required:!0,className:`text-sm text-slate-500 rounded-lg border border-slate-500 p-2
          file:mr-4 file:py-2 file:px-4
          file:rounded-full file:border-0
          file:text-sm file:font-semibold
          file:bg-blue-50 file:text-blue-700
          hover:file:bg-blue-100
          mt-4 file:mt-0 file:ml-4
          mb-4 file:mb-0`,type:"file",id:"csvFileInput",accept:".csv",onChange:N}),t.jsx("br",{}),t.jsx(g,{loading:w,className:"rounded-lg bg-blue-500 text-white font-bold px-4 disabled:opacity-50",disabled:!l,type:"submit",onClick:D,children:"Import From CSV"})]})]})},M=q;export{M as U};
