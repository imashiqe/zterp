import{o as w,e as b,u as f,b as x,r,cy as A,cz as N,j as e,C as M,k as i,c1 as I,cA as P,L as S,x as L,y as p}from"./index-16ff5701.js";import{S as E,L as R,P as m}from"./AdminLayout-ac80ae52.js";import{A as D}from"./AddTransaction-47663915.js";import{T as c}from"./index-1ab3c210.js";import{d as j}from"./dayjs.min-72f12467.js";import{C as $,U as O,T as U}from"./TableComponent-f70e0475.js";import{C as z}from"./CreateDrawer-33537b52.js";import{D as F}from"./index-f03f7796.js";import"./Button-81cb4f36.js";import"./BigDrawer-5db64386.js";import"./index-8b1cef28.js";import"./useForceUpdate-5b1eefe7.js";import"./AddAccount-215a6d3d.js";import"./EditOutlined-f754bc7b.js";const G=()=>{const{id:t}=w();b();const o=f(),s=x(d=>d.transactions.transaction);return r.useState(!1),r.useEffect(()=>(o(A(t)),()=>{o(N())}),[t,o]),e.jsx("div",{children:e.jsx("div",{className:"my-[40px]",children:s?e.jsx(r.Fragment,{children:e.jsxs(M,{bordered:!1,className:"card-custom",children:[e.jsx("div",{className:"card-header d-flex justify-content-between mb-2",style:{padding:0},children:e.jsxs("h5",{children:[e.jsx(E,{}),e.jsxs("span",{className:"ml-[20px]",children:["ID : ",s.id," | ",s.date]})]})}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx(c.Text,{className:"font-semibold",children:"Date :"})," ",i(s.date).format("YYYY-MM-DD")]}),e.jsxs("p",{children:[e.jsx(c.Text,{strong:!0,children:"Amount :"})," ",s.amount]}),e.jsxs("p",{children:[e.jsx(c.Text,{strong:!0,children:"Particulars :"})," ",s.particulars]}),e.jsxs("p",{children:[e.jsx(c.Text,{strong:!0,children:"Type :"})," ",s.type]})]})]})},s.id):e.jsx(R,{})})})},H=G,V=()=>{var h;const t=f(),{list:o,total:s,loading:d}=x(a=>a.transactions),{list:n}=x(a=>a.accounts),{RangePicker:y}=F,[l,u]=r.useState({page:1,count:10,status:"true",startDate:i().startOf("month").format("YYYY-MM-DD"),endDate:i().endOf("month").format("YYYY-MM-DD")}),Y=[{id:1,title:"ID",dataIndex:"id",key:"id",render:a=>e.jsx(S,{to:`/admin/transaction/${a}`,children:a}),renderCsv:a=>a},{id:2,title:"Date",dataIndex:"date",key:"date",render:a=>i(a).format("ll"),renderCsv:a=>i(a).format("ll")},{id:3,title:"Debit Account",dataIndex:"debit",key:"debit",render:a=>a==null?void 0:a.name,renderCsv:a=>a==null?void 0:a.name},{id:4,title:"Credit Account",dataIndex:"credit",key:"credit",render:a=>a==null?void 0:a.name,renderCsv:a=>a==null?void 0:a.name},{id:5,title:"Amount",dataIndex:"amount",key:"amount",responsive:["md"]},{title:"Type",dataIndex:"type",key:"type"},{id:6,title:"Particulars",dataIndex:"particulars",key:"particulars"}],C=[{key:"debitId",label:"Debit A/C",type:"select",options:n==null?void 0:n.map(a=>({label:a==null?void 0:a.name,value:a==null?void 0:a.id})),className:"min-w-[100px] max-w-[150px]",popupClassName:"w-[200px]"},{key:"creditId",label:"Credit A/C",type:"select",options:n==null?void 0:n.map(a=>({label:a==null?void 0:a.name,value:a==null?void 0:a.id})),className:"min-w-[100px] max-w-[150px]",popupClassName:"w-[200px]"},{key:"status",label:"Status",type:"select",options:[{label:"Show",value:"true"},{label:"Hide",value:"false"}],className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[200px]"}];r.useEffect(()=>{t(I())},[t]),r.useEffect(()=>{t(P(l))},[t,l]);const T=a=>{const g=a[0].format("YYYY-MM-DD"),k=a[1].format("YYYY-MM-DD");u(v=>({...v,startDate:g,endDate:k}))};return e.jsxs($,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Transaction List",extra:e.jsxs("div",{className:"flex gap-3 md:justify-end justify-between  items-center",children:[e.jsx(y,{className:"range-picker w-3/6",onCalendarChange:T,defaultValue:[j(l.startDate,"YYYY-MM-DD"),j(l.endDate,"YYYY-MM-DD")]})," ",e.jsx(z,{width:35,permission:"create-transaction",title:"Create Transaction",children:e.jsx(D,{})})]}),children:[" ",e.jsx(O,{permission:"readAll-transaction",children:e.jsx(U,{list:o,total:(h=s==null?void 0:s._count)==null?void 0:h.id,columns:Y,loading:d,setPageConfig:u,title:"Transaction List",filters:C,isSearch:!0})})]})},_=t=>e.jsx("div",{children:e.jsx(V,{})}),q=_;function ia(){return e.jsxs(L,{children:[e.jsx(p,{path:"/transaction",exact:!0,element:e.jsx(m,{permission:"readAll-transaction",children:e.jsx(q,{})})}),e.jsx(p,{path:"/transaction/create",exact:!0,element:e.jsx(m,{permission:"create-transaction",children:e.jsx(D,{})})}),e.jsx(p,{path:"/transaction/:id",element:e.jsx(m,{permission:"readSingle-transaction",children:e.jsx(H,{})})})]})}export{ia as default};
