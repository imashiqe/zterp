import{F as p,o as w,u as S,r as n,j as e,N as E,I as F,B as T,bB as A,bf as j,e as U,b,bC as Y,bD as B,C as $,L as f,bj as L,k as v,bE as M,x as Q,y as g}from"./index-16ff5701.js";import{L as V,P as y}from"./AdminLayout-ac80ae52.js";import{V as I}from"./ViewBtn-eedc84ae.js";import{C as R,U as q,T as G}from"./TableComponent-f70e0475.js";import{C as D}from"./CreateDrawer-33537b52.js";import{T as H}from"./TableNoPagination-c83d1dd6.js";import{G as O}from"./generateBarcodePopUp-585b7176.js";import{A as K}from"./addProductSubcategory-34015a86.js";import{C as W}from"./CommonDelete-6a643bdc.js";import{M as z}from"./ModalUi-03657474.js";import{E as J}from"./EditOutlined-f754bc7b.js";import"./Button-81cb4f36.js";import"./index-8b1cef28.js";import"./useForceUpdate-5b1eefe7.js";import"./html2canvas.esm-e0a7d97b.js";import"./jspdf.es.min-3ec80e90.js";import"./barcodeGenerator-8021e62b.js";import"./index-2e4f1652.js";import"./InfoCircleFilled-829db91a.js";import"./fade-f955b557.js";import"./UploadMany-ab6f4635.js";import"./BigDrawer-5db64386.js";import"./addProductCategory-004b5cd6.js";import"./index-1ab3c210.js";import"./DeleteOutlined-e1f8fe69.js";function C({subcategory:s,modal:d,onClose:o}){const[a]=p.useForm(),{id:l}=w(),r=S(),[i,c]=n.useState({name:s.name}),[x,u]=n.useState(),h=async P=>{var N;try{c({});const m=await r(A({id:d?s==null?void 0:s.id:l,values:P}));((N=m==null?void 0:m.payload)==null?void 0:N.message)==="success"&&d&&(r(j({page:1,count:10,status:"true"})),o()),u(!1)}catch{u(!1)}},t=P=>{};return!localStorage.getItem("isLogged")?e.jsx(E,{to:"/admin/auth/login",replace:!0}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-center",children:e.jsx("div",{children:e.jsxs(p,{initialValues:{...i},form:a,className:"m-4",name:"basic",layout:"vertical",onFinish:h,onFinishFailed:t,autoComplete:"off",children:[e.jsx(p.Item,{style:{marginBottom:"10px"},fields:[{name:"Name"}],label:"Name",name:"name",rules:[{required:!0,message:"Please input Subcategory name!"}],children:e.jsx(F,{})}),e.jsx(p.Item,{style:{marginBottom:"10px"},children:e.jsx(T,{onClick:()=>u(!0),block:!0,type:"primary",htmlType:"submit",shape:"round",loading:x,children:"Update Now"})})]})})})})}const X=()=>{const{id:s}=w();U();const d=[{id:1,title:"Image",dataIndex:"thumbnailImageUrl",render:r=>e.jsx("img",{style:{maxWidth:"40px"},alt:"product",src:r})},{id:2,title:"ID",dataIndex:"id",key:"id"},{id:3,title:"SKU",dataIndex:"sku",key:"sku"},{id:4,title:"Name",dataIndex:"name",key:"name",render:(r,{id:i})=>e.jsx(f,{to:`/admin/product/${i}`,children:r}),tdClass:"whitespace-normal"},{id:5,title:"Quantity",dataIndex:"productQuantity",key:"productQuantity"},{id:6,title:"Purchase price",dataIndex:"productPurchasePrice",key:"productPurchasePrice",responsive:["md"]},{id:7,title:"Sale price",dataIndex:"productSalePrice",key:"productSalePrice",responsive:["md"]},{id:8,title:"Unit Type",dataIndex:"unitType",key:"unitType"},{id:9,title:"Reorder QTY",dataIndex:"reorderQuantity",key:"reorderQuantity"},{id:10,title:"",key:"action",render:({sku:r,id:i})=>[{label:e.jsx(I,{title:"View",path:`/admin/product/${i}`}),key:"view"},{label:e.jsx(O,{sku:r||0}),key:"barcode"}]}],o=S(),a=b(r=>{var i;return(i=r.productSubCategories)==null?void 0:i.subCategory});n.useEffect(()=>(o(Y(s)),()=>{o(B())}),[o,s]);const l=e.jsx(e.Fragment,{children:e.jsxs("h5",{className:"text-center mb-2 text-lg",children:["Products under ",e.jsxs("strong",{children:[a==null?void 0:a.name," "]})]})});return e.jsx(e.Fragment,{children:e.jsx("div",{className:"mr-top",children:a?e.jsxs($,{className:"border-0 md:border md:p-6 bg-transparent md:bg-[#fafafa]",bodyStyle:{padding:0},children:[e.jsxs("div",{className:"md:flex flex justify-between md:mb-8 items-center gap-2",children:[e.jsx("h5",{className:"flex items-center",children:e.jsx("span",{className:"mr-left",children:a.name})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(D,{permission:"update-productSubCategory",title:"Update SubCategory",update:!0,color:"bg-gray-700",width:30,children:e.jsx(C,{subcategory:a})})})]}),e.jsx(H,{list:a==null?void 0:a.product,columns:d,csvFileName:"SubCategory",rightElement:l})]},a.id):e.jsx(V,{})})})},Z=X,_=()=>{const s=S(),[d,o]=n.useState(!1),{list:a,total:l,loading:r}=b(t=>t.productSubCategories),{list:i}=b(t=>t.productCategories),[c,x]=n.useState({page:1,count:10,status:"true"}),u=[{id:1,title:"ID",dataIndex:"id",key:"id",render:t=>e.jsx(f,{to:`/admin/product-subcategory/${t}`,children:t}),renderCsv:t=>t},{id:2,title:"Name",dataIndex:"name",key:"name",render:(t,{id:k})=>e.jsx(f,{to:`/admin/product-subcategory/${k}`,children:t}),renderCsv:t=>t},{id:3,title:"Created At",dataIndex:"createdAt",key:"createdAt",render:t=>v(t).format("YYYY-MM-DD"),renderCsv:t=>v(t).format("YYYY-MM-DD")},{id:13,title:"",key:"action",render:t=>[{label:e.jsx(I,{title:"view",path:`/admin/product-subcategory/${t==null?void 0:t.id}`}),key:"view"},{label:e.jsxs("div",{onClick:()=>{o(t)},className:"flex gap-2  items-center cursor-pointer",children:[e.jsx(J,{className:"text-[1rem]"}),"Edit"]}),key:"edit"},{label:e.jsx(W,{values:{id:t==null?void 0:t.id,status:t==null?void 0:t.status},title:(t==null?void 0:t.status)==="true"?"Hide":"Show",permission:"delete-productSubCategory",deleteThunk:M,loadThunk:j,query:c,className:"bg-white text-black"}),key:"delete"}],csvOff:!0}],h=[{key:"Category",label:"Category",type:"select",options:i==null?void 0:i.map(t=>({label:t==null?void 0:t.name,value:t==null?void 0:t.id})),className:"min-w-[123px] max-w-[150px]",popupClassName:"w-[200px]"},{key:"status",label:"Status",type:"select",options:[{label:"Show",value:"true"},{label:"Hide",value:"false"}],className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[200px]"}];return n.useEffect(()=>{s(j(c))},[s,c]),n.useEffect(()=>{s(L({query:"all"}))},[s]),e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Product Sub Category",extra:e.jsx(D,{permission:"create-productSubCategory",title:"Create Subcategory",width:35,children:e.jsx(K,{})}),children:e.jsx(q,{permission:"readAll-productSubCategory",children:e.jsx(G,{columns:u,setPageConfig:x,list:a,total:l,loading:r,title:"Product SubCategory",filters:h,isSearch:!0})})}),e.jsx(z,{outsideClick:!0,open:d,title:"Edit Product SubCategory",className:"bg-white",onClose:()=>o(!1),children:e.jsx(C,{modal:!0,subcategory:d,onClose:()=>o(!1)})})]})},ee=()=>e.jsx(e.Fragment,{children:e.jsx(_,{})}),te=ee;function we(){return e.jsxs(Q,{children:[e.jsx(g,{path:"/product-subcategory",exact:!0,element:e.jsx(y,{permission:"readAll-productSubCategory",children:e.jsx(te,{})})}),e.jsx(g,{path:"/product-subcategory/:id",element:e.jsx(y,{permission:"readSingle-productSubCategory",children:e.jsx(Z,{})})}),e.jsx(g,{path:"/product-subcategory/:id/update",element:e.jsx(y,{permission:"update-productSubCategory",children:e.jsx(C,{})})})]})}export{we as default};
